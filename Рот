import random

def create_board(size):
    board = []
    for _ in range(size):
        row = ["O"] * size
        board.append(row)
    return board

def print_board(board):
    for row in board:
        print(" ".join(row))

def place_ships(board, num_ships):
    size = len(board)
    for _ in range(num_ships):
        ship_row = random.randint(0, size - 1)
        ship_col = random.randint(0, size - 1)
        while board[ship_row][ship_col] == "X":
            ship_row = random.randint(0, size - 1)
            ship_col = random.randint(0, size - 1)
        board[ship_row][ship_col] = "X"

def check_guess(guess, ships):
    row, col = guess
    if ships[row][col] == "X":
        print("Попадание!")
        ships[row][col] = "!"
        return True
    else:
        print("Промах!")
        return False

def main():
    size = 5
    num_ships = 3
    board = create_board(size)
    ships = create_board(size)
    place_ships(ships, num_ships)
    print("Добро пожаловать в игру 'Морской бой'!")
    print("Поле размером", size, "x", size)
    print_board(board)
    turns = 0
    while True:
        guess_row = int(input("Введите номер строки (0-" + str(size - 1) + "): "))
        guess_col = int(input("Введите номер столбца (0-" + str(size - 1) + "): "))
        if guess_row < 0 or guess_row >= size or guess_col < 0 or guess_col >= size:
            print("Выберите корректные значения!")
            continue
        turns += 1
        guess = (guess_row, guess_col)
        if check_guess(guess, ships):
            print_board(board)
            print("Потоплено кораблей:", sum(row.count("!") for row in ships))
            if sum(row.count("!") for row in ships) == num_ships:
                print("Поздравляем! Вы победили за", turns, "ходов!")
                break
        else:
            print_board(board)

if __name__ == "__main__":
    main()
